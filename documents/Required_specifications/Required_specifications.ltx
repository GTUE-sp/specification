\documentclass[dvipdfmx,uplatex]{jsarticle}
\usepackage[dvipdfmx]{graphicx}
\usepackage{here}
\usepackage{listings,jlisting}

\lstset{%
  language={C},
  basicstyle={\small},%
  identifierstyle={\small},%
  commentstyle={\small\itshape},%
  keywordstyle={\small\bfseries},%
  ndkeywordstyle={\small},%
  stringstyle={\small\ttfamily},
  frame={tb},
  breaklines=true,
  columns=[l]{fullflexible},%
  %numbers=left,%
  xrightmargin=0zw,%
  xleftmargin=3zw,%
  numberstyle={\scriptsize},%
  stepnumber=1,
  numbersep=1zw,%
  lineskip=-0.5ex%
}



\begin{document}




\begin{titlepage}
\title{要求仕様書 - Google先生が全て教えてくれました。}
\author{13 荻野陽太\and 23 小枩谷勇二\and 25 今野央惟\and 43 水野恭介}
\maketitle
\thispagestyle{empty}
\end{titlepage}
\tableofcontents %目次


\newpage
\section{ソフトウェアの概要}
本ソフトウェアは，サレジオ工業高等専門学校教員向けの，5CSの出席管理・対象の学生のタイムカード管理を電子化するシステムであり，2つのシステムに大別される．

\subsection{出席管理}
担任業務の1つである学生の累計・週計の出欠状況の記録は紙ベースの出席簿を用いて行っている．ホームルーム及び各授業開始時に出席状況を記録し，毎週末ごとに週ごとの出欠状況及び学年開始からの通算出欠数を算出している．担任が不在の場合はこの業務は副担任が担当する．

しかし，記録をはじめとしたこれらの作業は全て手作業で行っているため，誤って記録・算出するリスクが大きく，また，訂正も行いづらいといった問題点が存在する．

\subsection{タイムカード管理}
遅刻回数が10回を超えた学生はタイムカード指導を受ける必要がある．その学生が指導に従っているかどうかの確認は担任が行っている．

担任が不在の場合は学生は別の教員を探し，確認してもらう必要がある．「ホームルームの時間より10分前に登校したか否か」という単純な確認である．教員側にとっても学生側にとっても手間であるため自動化，又は半自動化したい．


\section{ソフトウェアの開発及び動作プラットフォーム}

\subsection{出席管理}
本システムはweb上で動作するサービスである．対応ブラウザはGoogle Chrome67.0.3396.99(Official Build)(64ビット)となっている．また，タブレット上で動作することを想定している．

また，システム開発にはReact.js16.4.1・TypeScript2.9.1(フロントエンド)，PHP7(サーバーサイド)を使用する．データベースとしてMySQL5.7.21を動作させることとする．データベースはサレジオ工業高等専門学校学内ネットワーク上に属する．

開発に使用するOSは，macOS Sierra以降(64ビット)・Linuxmint18.1(32ビット)である．

\subsection{タイムカード管理}
本システムは，Raspberry pi2で動作することを想定する。使用するカメラは，Logicool 1319LZ05HS28である．

また，システム開発にはPython3.6.4を使用する．



\newpage
\section{ソフトウェアの構成}
\subsection{出席管理}
出席管理システムの概要図を以下に示す．
\begin{figure}[H]
    \includegraphics[width=14cm]{/Users/NULL_Character/GTUE-sp/specification/documents/Required_specifications/resource/img/attend.png}
    \caption{出席管理システム概要図}
    \label{fig:attend}
\end{figure}
システムの流れは以下の通りである．
\begin{enumerate}
    \item 担任のIDとパスワードによりログインする．
    \item 出席を取り，欠席している学生を確認する．
    \item web上の出席簿に，欠席している学生を記録する．
    \item 出欠席データは随時端末のローカルデータベースに保存される．これにより，担任は各学生の任意の日及び任意の期間の出欠席状況，累計欠席・欠課状況をいつでも確認できる．
    \item 学内サーバー上に存在するデータベースの情報は，端末がインターネットに接続された際に，端末のローカルデータベースに保存されている最新の情報に更新される．
\end{enumerate}


\newpage
\subsection{タイムカード管理}
タイムカード管理システムの概要図を以下に示す．
\begin{figure}[H]
    \includegraphics[width=14cm]{/Users/NULL_Character/GTUE-sp/specification/documents/Required_specifications/resource/img/timecard.png}
    \caption{タイムカード管理システム概要図}
    \label{fig:timecard}
\end{figure}

システムの流れは以下の通りである．
\begin{enumerate}
    \item タイムカード指導対象の学生は，Raspberry pi上の登録フォームにて学生識別用QRコードを入手・印刷する．
    \item Raspberry piに取り付けられたwebカメラを使用しQRコードを読み取る．
    \item 本人確認の為にQRコードをスキャンした学生の写真を撮影する．撮影された写真・スキャンログは，Raspberry piのローカルストレージに保存される．
    \item 担任は，Raspberry pi上のデータを確認できる．
\end{enumerate}



\newpage
\section{各機能の詳細}
\subsection{出席管理}
\subsubsection{新規登録機能}
本システムを操作する人物(教員)情報をシステムに登録する機能．IDとパスワードを登録する．

画面にはID(ラベル:ユーザID)・パスワード(ラベル:パスワード)を入力するフォームと，「sign up」ボタンが表示される．ただしパスワードは2回入力する必要があり，パスワードフォームは2つある．2つ目のパスワードフォームは「パスワード[確認]」というラベルになっている．2つのパスワードフォームには同等のパスワードを入力しなければ新規登録はできない．

ID及びパスワードは共に半角英数字1文字以上32字以内であり，記号は入力不可能である．IDは大文字小文字の区別はしない．パスワードは大文字小文字の区別をする．

ID及びパスワードの仕様から外れた入力をし「sign up」ボタンを押すと，「指定されている形式で入力してください」と表示される．

ID及びパスワードフォームに入力をせずに「sign up」ボタンを押すと，「このフィールドを入力してください」と表示される．

既に登録されたIDを入力した場合には，画面上部に「\\
Error:ユーザの新規作成に失敗しました\\
そのユーザIDはすでに使用されています\\
」と表示された新規登録画面になる．

2つのパスワードフォームに異なるパスワードを入力した場合には，画面上部に「\\
Error:ユーザの新規作成に失敗しました\\
パスワードをもう一度確認してください\\
」と表示された新規登録画面になる．

正しい形式でフォームが入力され，「sign up」ボタンが押されると，DBにIDとパスワードが挿入され，画面上には「\\
ユーザ登録に成功しました\\
こちらのリンクより移動してください\\
」と表示される．リンクをクリックすると自動的にログインされる．

\subsubsection{ログイン機能}
本システムを操作している人物が担任または副担任であることを認証する機能である．

画面にはID(ラベル:ユーザID)・パスワード(ラベル:パスワード)を入力するフォームと，「ログイン」ボタンが表示される．指定のIDとパスワードを入力し，認証を行う．パスワードは変更可能である．

ID及びパスワードの仕様は上記の新規登録と同様であり，仕様から外れた入力をした場合及びフォームに入力せずに「ログイン」ボタンを押した場合は上記の新規登録と同様の表示となる．

誤ったID及びパスワードを入力した場合はログインせず，画面上部に「\\
Error:ログインに失敗しました\\
そのようなユーザIDは存在しないか、パスワードが間違っています\\
」と表示されたログイン画面になる．

正しいIDとパスワードを入力した場合はログインをする．

\subsubsection{出欠席状況入力機能}
画面に紙ベースの出席簿と同じ雛形の名簿を表示する．画面上の各学生の名前に隣接する欠課ボタンをタップすることで，対応する学生が欠課と記録される．(現在の時刻から何限目かを自動で判別するため，いつ欠課したか記録される．)

また，画面上の各学生の名前に隣接する備考ボタンをタップすることで，対応する学生の備考を記録できる．


\subsubsection{出欠席状況算出機能}
学生の出席状況が更新されるたびに各学生の累計欠席情報を更新する．また毎週末に週計欠席情報を更新する．

\subsubsection{データ表示機能}
各学生の任意の日及び任意の期間の出欠席状況，累計欠席・欠課状況をいつでも確認できる．

\subsubsection{更新データ保存機能}
出欠席データは，端末のデータベース(ローカル)に保存される．1年分のデータをローカルに保存する．

\subsubsection{データ更新機能}
端末がオンライン時(インターネットに接続されている時)に，ローカルに保存されているデータを，学内サーバー上のデータベースにアップロードし更新する．


\newpage
\subsection{タイムカード管理}
\begin{enumerate}
    \item 指導学生識別機能 \\
    学生識別用のIDをQRコード形式で発行する．学生は，Raspberry pi上の登録フォームにて学生識別用QRコードを入手・印刷する．指導対象の学生には発行されたQRコードを携帯させ，登校時にカメラを使用してQRコードの読み込みをさせる． \\
    \item 学生撮影・保存機能． \\
    登校した学生の姿を撮影し，Raspberry pi上に保存する．学生の姿の写真は教員の確認用に使用し，システム上での個人の識別はしない． \\
\end{enumerate}



\newpage
\section{用語集}
\begin{itemize}
    \item React.js \\
    Webアプリケーションにおける，ユーザーインターフェイスを構築するためのJavaScriptのフレームワークである．フレームワークを利用することで，開発効率の向上が期待できる． \\
    \item TypeScript \\
    マイクロソフトによって開発され，メンテナンスされているフリーでオープンソースのプログラミング言語である．コンパイル時にJavaScriptに変換されるため，JavaScriptと同等として扱うことができる． \\
    \item Raspberry pi \\
    一般的なPCと同様に動作させることができる小型のコンピュータ．
\end{itemize}


\newpage
\section{更新履歴}
\begin{table}[H]
    \caption{更新履歴}
    \begin{center}
        \begin{tabular}{|c|c|c|}\hline
            更新日 & 内容 & 担当者 \\ \hline
            2018/06/08 & 初版作成 & 小枩谷勇二 \\ \hline
            & 第2版作成 & \\
            & 使用フレームワークをVue.jsからReact.jsに変更 & \\
            2018/07/13 & 開発環境のバージョン情報を明記 & 小枩谷勇二 \\
            & タイムカードシステムのQRコードの発行方法を明記 & \\
            & タイムカードシステムのメール送信機能を廃止 & \\
            & その他細かな変更 & \\ \hline
            & 第3版作成 & \\
            2018/11/23 & 新規登録・ログイン機能について，仕様の詳細を明記 & 小枩谷勇二 \\ \hline
            & 第4版作成 & \\
            2018/11/23 & サーバーサイド開発環境をLaravelからPHP7に変更 & 小枩谷勇二 \\ \hline
        \end{tabular}
    \end{center}
    \label{tab:koushin}

\end{table}










\end{document}

%\lstinputlisting[basicstyle=\ttfamily\footnotesize, frame=single]{path}
%\ref{tab:price} label{tab:price}
